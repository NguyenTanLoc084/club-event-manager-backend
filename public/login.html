<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêƒÉng nh·∫≠p Admin | CLB Event</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; background: #f4f7f6; height: 100vh; display: flex; align-items: center; margin: 0; }
        .login-card { border: none; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); width: 100%; max-width: 400px; padding: 2.5rem; background: white; z-index: 10; }
        .btn-dark { border-radius: 12px; padding: 12px; font-weight: 700; background: #1e3c72; border: none; transition: all 0.3s; }
        .btn-dark:hover { background: #2a5298; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(30, 60, 114, 0.3); }
        
        /* Loader CSS */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #1e3c72; display: flex; justify-content: center; align-items: center;
            z-index: 9999; transition: opacity 0.5s ease, visibility 0.5s;
        }
        .spinner { width: 50px; height: 50px; border: 5px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loader-hidden { opacity: 0; visibility: hidden; }
    </style>
</head>
<body>
    <div id="loader">
        <div class="spinner"></div>
    </div>

    <div class="container d-flex justify-content-center">
        <div class="login-card">
            <h3 class="text-center fw-bold mb-4 text-dark">üîê Admin Access</h3>
            <p class="text-muted text-center small mb-4">Ch√†o L·ªôc, vui l√≤ng x√°c th·ª±c ƒë·ªÉ qu·∫£n l√Ω h·ªá th·ªëng</p>
            
            <div class="mb-3">
                <label class="form-label fw-semibold small">Email qu·∫£n tr·ªã</label>
                <input type="email" id="email" class="form-control form-control-lg" value="agileteam782@gmail.com" readonly style="background-color: #f8f9fa; font-size: 0.9rem;">
            </div>
            <div class="mb-4">
                <label class="form-label fw-semibold small">M·∫≠t kh·∫©u</label>
                <input type="password" id="password" class="form-control form-control-lg" placeholder="Nh·∫≠p m·∫≠t kh·∫©u (123456)">
            </div>
            
            <button class="btn btn-dark w-100 btn-lg" onclick="handleLogin()">X√ÅC NH·∫¨N ƒêƒÇNG NH·∫¨P</button>
            
            <div class="text-center mt-4">
                <a href="index.html" class="text-decoration-none small text-muted">‚Üê Quay l·∫°i Portal</a>
            </div>
        </div>
    </div>

    <script>
        // T·ª± ·∫©n loader khi v√†o trang
        window.addEventListener("load", function() {
            setTimeout(() => {
                document.getElementById("loader").classList.add("loader-hidden");
            }, 500);
        });

        function handleLogin() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const loader = document.getElementById("loader");

            if (!password) {
                alert("L·ªôc ∆°i, b·∫°n qu√™n nh·∫≠p m·∫≠t kh·∫©u r·ªìi!");
                return;
            }

            // Hi·ªán loader khi ƒëang ki·ªÉm tra
            loader.classList.remove("loader-hidden");

            fetch('/api/admin/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, password })
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    localStorage.setItem("isAdmin", "true");
                    // Chuy·ªÉn th·∫≥ng v√†o trang Admin qu·∫£n l√Ω danh s√°ch
                    setTimeout(() => {
                        window.location.href = "admin.html"; 
                    }, 800);
                } else {
                    loader.classList.add("loader-hidden");
                    alert("M·∫≠t kh·∫©u kh√¥ng ch√≠nh x√°c! Th·ª≠ l·∫°i nh√© L·ªôc.");
                }
            })
            .catch(() => {
                loader.classList.add("loader-hidden");
                alert("L·ªói k·∫øt n·ªëi server Render!");
            });
        }
    </script>
</body>
</html>
